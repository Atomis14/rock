(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2f450052"],{"0a76":function(e,t,s){"use strict";s("1433")},1433:function(e,t,s){},"7ed1":function(e,t,s){"use strict";s("a53e")},a53e:function(e,t,s){},eaad:function(e,t,s){"use strict";s.r(t);var n=s("7a23"),c=Object(n["G"])("data-v-00159f54");Object(n["s"])("data-v-00159f54");var a={class:"Messages view"},r=Object(n["g"])("h1",null,"Messages",-1),u=Object(n["g"])("p",null,"Private messages",-1),o=Object(n["f"])(" Send message to: "),i=Object(n["g"])("br",null,null,-1),b=Object(n["g"])("br",null,null,-1),O=Object(n["g"])("br",null,null,-1),l=Object(n["g"])("input",{type:"submit",value:"Send"},null,-1),d={class:"Messages__messagesContainer"},j=Object(n["g"])("h3",null,"received Messages",-1),m=Object(n["g"])("h3",null,"sent Messages",-1);Object(n["q"])();var g=c((function(e,t,s,c,g,p){var f=Object(n["w"])("MessagePreview");return Object(n["p"])(),Object(n["d"])("div",a,[r,u,Object(n["g"])("form",{onSubmit:t[3]||(t[3]=Object(n["F"])((function(){return p.submitForm&&p.submitForm.apply(p,arguments)}),["prevent"]))},[o,Object(n["E"])(Object(n["g"])("select",{"onUpdate:modelValue":t[1]||(t[1]=function(e){return g.form.recipient=e})},[(Object(n["p"])(!0),Object(n["d"])(n["a"],null,Object(n["v"])(g.users,(function(e){return Object(n["p"])(),Object(n["d"])("option",{key:e._id,value:e._id},Object(n["y"])(e.username),9,["value"])})),128))],512),[[n["A"],g.form.recipient]]),i,b,Object(n["E"])(Object(n["g"])("textarea",{"onUpdate:modelValue":t[2]||(t[2]=function(e){return g.form.content=e})},null,512),[[n["B"],g.form.content]]),O,l,Object(n["g"])("p",null,Object(n["y"])(g.form.status),1)],32),Object(n["g"])("div",d,[j,(Object(n["p"])(!0),Object(n["d"])(n["a"],null,Object(n["v"])(g.messages.receivedMessages,(function(e){return Object(n["p"])(),Object(n["d"])(f,{key:e._id,message:e},null,8,["message"])})),128)),m,(Object(n["p"])(!0),Object(n["d"])(n["a"],null,Object(n["v"])(g.messages.sentMessages,(function(e){return Object(n["p"])(),Object(n["d"])(f,{key:e._id,message:e},null,8,["message"])})),128))])])})),p=(s("4de4"),s("5530")),f=s("5502"),v=s("fa07"),h=new v["a"]("/users",{get:!0,getOne:!0,post:!1,put:!0,patch:!0,remove:!1,removeOne:!0}),w=new v["a"]("/messages",{get:!0,getOne:!1,post:!0,put:!1,patch:!1,remove:!0,removeOne:!0}),y=Object(n["G"])("data-v-966c4728");Object(n["s"])("data-v-966c4728");var M={class:"MessagePreview row"},_={class:"col-2"},k={class:"col-7"},P={key:0,class:"col-3"},F={key:1,class:"col-3"};Object(n["q"])();var S=y((function(e,t,s,c,a,r){return Object(n["p"])(),Object(n["d"])("div",M,[Object(n["g"])("div",_,Object(n["y"])(new Date(s.message.createdAt).toLocaleString("fr-ch")),1),Object(n["g"])("div",k,Object(n["y"])(s.message.content),1),s.message.sender?(Object(n["p"])(),Object(n["d"])("div",P,"from: "+Object(n["y"])(s.message.sender.user.username),1)):Object(n["e"])("",!0),s.message.recipient?(Object(n["p"])(),Object(n["d"])("div",F,"to: "+Object(n["y"])(s.message.recipient.user.username),1)):Object(n["e"])("",!0)])})),q={name:"MessagePreview",props:{message:{type:Object,required:!0}},data:function(){return{name:""}}};s("7ed1");q.render=S,q.__scopeId="data-v-966c4728";var I=q,A={components:{MessagePreview:I},data:function(){return{form:{recipient:"",content:"",status:""},users:{},messages:{}}},computed:Object(p["a"])({},Object(f["d"])({user:"auth/user"})),methods:{submitForm:function(){var e=this;w.post({recipientId:this.form.recipient,content:this.form.content}).then((function(){e.form.recipient="",e.form.content="",e.form.status="message sent successfully"})).catch((function(t){e.form.status=t.response.data}))}},created:function(){var e=this;h.get().then((function(t){e.users=t.filter((function(t){return t._id!==e.user.id}))})),w.get().then((function(t){return e.messages=t}))}};s("0a76");A.render=g,A.__scopeId="data-v-00159f54";t["default"]=A}}]);
//# sourceMappingURL=chunk-2f450052.3f92eb79.js.map