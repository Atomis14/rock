{"version":3,"sources":["webpack:///./src/views/Messages.vue?96a8","webpack:///./src/components/MessagePreview.vue?bd2b","webpack:///./src/views/Messages.vue","webpack:///./src/services/users.service.js","webpack:///./src/services/messages.service.js","webpack:///./src/components/MessagePreview.vue","webpack:///./src/components/MessagePreview.vue?c0b9","webpack:///./src/views/Messages.vue?46ef"],"names":["class","type","value","submitForm","form","recipient","users","user","key","_id","username","content","status","messages","receivedMessages","message","sentMessages","usersAPI","ApiCore","get","getOne","post","put","patch","remove","removeOne","messagesAPI","Date","createdAt","toLocaleString","sender","name","props","Object","required","data","render","__scopeId","components","MessagePreview","computed","methods","recipientId","this","then","catch","err","response","created","filter","elem","id"],"mappings":"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","file":"js/chunk-2f450052.3f92eb79.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Messages.vue?vue&type=style&index=0&id=00159f54&lang=scss&scoped=true\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./MessagePreview.vue?vue&type=style&index=0&id=966c4728&lang=scss&scoped=true\"","<template>\r\n  <div class=\"Messages view\">\r\n    <h1>Messages</h1>\r\n    <p>Private messages</p>\r\n    <form @submit.prevent=\"submitForm\">\r\n      Send message to:\r\n      <select v-model=\"form.recipient\">\r\n        <option v-for=\"user in users\" :key=\"user._id\" :value=\"user._id\">\r\n          {{ user.username }}\r\n        </option>\r\n      </select>\r\n      <br /><br />\r\n      <textarea v-model=\"form.content\"></textarea><br />\r\n      <input type=\"submit\" value=\"Send\" />\r\n      <p>{{ form.status }}</p>\r\n    </form>\r\n    <div class=\"Messages__messagesContainer\">\r\n      <h3>received Messages</h3>\r\n      <MessagePreview v-for=\"message in messages.receivedMessages\" :key=\"message._id\" :message=\"message\" />\r\n      <h3>sent Messages</h3>\r\n      <MessagePreview v-for=\"message in messages.sentMessages\" :key=\"message._id\" :message=\"message\" />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters } from 'vuex';\r\n\r\nimport { usersAPI } from '../services/users.service.js';\r\nimport { messagesAPI } from '../services/messages.service.js';\r\nimport MessagePreview from '../components/MessagePreview.vue';\r\n\r\nexport default {\r\n  components: {\r\n    MessagePreview\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      form: {\r\n        recipient: '',\r\n        content: '',\r\n        status: '',\r\n      },\r\n      users: {},\r\n      messages: {}\r\n    };\r\n  },\r\n\r\n  computed: {\r\n    ...mapGetters({\r\n      user: 'auth/user',\r\n    }),\r\n  },\r\n\r\n  methods: {\r\n    submitForm() {\r\n      messagesAPI\r\n        .post({\r\n          recipientId: this.form.recipient,\r\n          content: this.form.content,\r\n        })\r\n        .then(() => {\r\n          this.form.recipient = '';\r\n          this.form.content = '';\r\n          this.form.status = 'message sent successfully';\r\n        })\r\n        .catch((err) => {\r\n          this.form.status = err.response.data;\r\n        });\r\n    },\r\n  },\r\n\r\n  created() {\r\n    usersAPI.get().then((users) => {\r\n      this.users = users.filter((elem) => {\r\n        return elem._id !== this.user.id;\r\n      });\r\n    });\r\n\r\n    messagesAPI.get().then(messages => this.messages = messages);\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n  .Messages {\r\n    \r\n    &__messagesContainer {\r\n      //border: 1px solid black;\r\n    }\r\n\r\n  }\r\n</style>","import { ApiCore } from './utilities/core.js';\r\n\r\nconst usersAPI = new ApiCore('/users', {\r\n  get: true,\r\n  getOne: true,\r\n  post: false,\r\n  put: true,\r\n  patch: true,\r\n  remove: false,\r\n  removeOne: true\r\n});\r\n\r\nexport { usersAPI };","import { ApiCore } from './utilities/core.js';\r\n\r\nconst messagesAPI = new ApiCore('/messages', {\r\n  get: true,\r\n  getOne: false,\r\n  post: true,\r\n  put: false,\r\n  patch: false,\r\n  remove: true,\r\n  removeOne: true\r\n});\r\n\r\nexport { messagesAPI };","<template>\r\n  <div class=\"MessagePreview row\">\r\n    <div class=\"col-2\">{{ new Date(message.createdAt).toLocaleString('fr-ch') }}</div>\r\n    <div class=\"col-7\">{{ message.content }}</div>\r\n    <div class=\"col-3\" v-if=\"message.sender\">from: {{ message.sender.user.username }}</div>\r\n    <div class=\"col-3\" v-if=\"message.recipient\">to: {{ message.recipient.user.username }}</div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'MessagePreview',\r\n\r\n  props: {\r\n    message: {\r\n      type: Object,\r\n      required: true\r\n    }\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      name: ''\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n  .MessagePreview {\r\n    border: 1px solid $color-primary;\r\n    padding: 10px;\r\n    margin-bottom: 5px;\r\n    & > div:last-child {\r\n      text-align: right;\r\n    }\r\n  }\r\n</style>","import { render } from \"./MessagePreview.vue?vue&type=template&id=966c4728&scoped=true\"\nimport script from \"./MessagePreview.vue?vue&type=script&lang=js\"\nexport * from \"./MessagePreview.vue?vue&type=script&lang=js\"\n\nimport \"./MessagePreview.vue?vue&type=style&index=0&id=966c4728&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-966c4728\"\n\nexport default script","import { render } from \"./Messages.vue?vue&type=template&id=00159f54&scoped=true\"\nimport script from \"./Messages.vue?vue&type=script&lang=js\"\nexport * from \"./Messages.vue?vue&type=script&lang=js\"\n\nimport \"./Messages.vue?vue&type=style&index=0&id=00159f54&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-00159f54\"\n\nexport default script"],"sourceRoot":""}